@{
    ViewData["Title"] = "Врачи";
}

<link rel="stylesheet" href="~/css/Doctors/Doctors.css" />
<link rel="stylesheet" href="~/css/Doctors/details.css" />

<div id="submenu" class="submenu">
    <a asp-area="" asp-controller="Home" asp-action="Index">
        <img src="~/images/logo/submenu/home.svg" />
    </a>
    <img src="~/images/logo/submenu/cdot.svg" class="cdot_in_submenu" />

    <div class="sub_item">
        Врачи
    </div>
</div>

<div class="main_page_template_table" id="main_page_template_table">
    <div style="margin-bottom: 42px;">
        <div class="h1_body_content" style="display: inline-block;">
            НАШИ ВРАЧИ
        </div>

        <div class="navigation_on_doctors_page" style="display: inline-block; float: right;">
            
            <button style="background: transparent; border: 0px;" onclick="Shift_Left_Scroller()"> <img src="~/images/logo/Doctors/left_arrow.svg" style="display: inline-block; margin-right: 20px; margin-top: -12px;" /> </button>
            <div id="index_navigation_doctors" class="navigation_indexes" style="display: inline-block;">
                5 / 8
            </div>
            <button style="background: transparent; border: 0px;" onclick="Shift_Right_Scroller()"> <img src="~/images/logo/Doctors/right_arrow.svg" style="display: inline-block; margin-left: 20px;" /> </button>
        </div>
    </div>

    <div id="list_of_doctors" class="parent">
        <div class="child">
            <img src="~/images/Content/Doctors/Radiation_Diagnostics/Chernorotov_Vladimir_Alexeevich_department_head.png" id="doctor_photo_8" class="doctor_photo" onmouseover="Show_Hide_Details(8, 'show')" onmouseout="Show_Hide_Details(8, 'hide')" />

            <div class="full_name">
                Черноротов Владимир Алексеевич
            </div>
            <div class="description">
                Заведующий отделением лучевой диагностики, врач рентгенолог высшей категории, Доктор медицинских наук, профессор Стаж работы: 35 лет.
            </div>
        </div>

        <div class="child not_first">
            <img src="~/images/Content/Doctors/Urology/Eremenko_Sergei_medium.jpg" id="doctor_photo_6" class="doctor_photo" onmouseover="Show_Hide_Details(6, 'show')" onmouseout="Show_Hide_Details(6, 'hide')" />

            <div class="full_name">
                Еременко Сергей Николаевич
            </div>
            <div class="description">
                Заведующий отделением урологии, врач-уролог высшей категории, врач-онколог, член Европейской ассоциации урологов, стаж - 37 лет.
            </div>
        </div>

        <div class="child not_first">
            <img src="~/images/Content/Doctors/Surgery/Филатов_Александр_Сергеевич.JPG" id="doctor_photo_5" class="doctor_photo" onmouseover="Show_Hide_Details(5, 'show')" onmouseout="Show_Hide_Details(5, 'hide')" />

            <div class="full_name">
                Филатов_Александр_Сергеевич
            </div>
            <div class="description">
                Врач-хирург, кандидат медицинских наук, стаж-39.
            </div>
        </div>


        <div class="child not_first">
            <img src="~/images/Content/Doctors/Surgery/Аблаев_Эльдар_Эдемович.JPG" class="doctor_photo" onmouseover="Show_Hide_Details(1, 'show')" onmouseout="Show_Hide_Details(1, 'hide')" />
            
            <div class="full_name">
                Аблаев Эльдар Эдемович
            </div>
            <div class="description">
                Врач-хирург, кандидат медицинских наук, стаж-14.
            </div>
        </div>
        <div class="child not_first">
            <img src="~/images/Content/Doctors/Surgery/Безруков_Олег_Филиппович_заведующий.JPG" class="doctor_photo" onmouseover="Show_Hide_Details(2, 'show')" onmouseout="Show_Hide_Details(2, 'hide')" />
            
            <div class="full_name">
                Безруков Олег Филиппович
            </div>
            <div class="description">
                Врач-хирург.
            </div>
        </div>
        <div class="child not_first">
            <img src="~/images/Content/Doctors/Surgery/Каракурсаков_Нариман_Эскендерович_medium.jpg" class="doctor_photo" onmouseover="Show_Hide_Details(3, 'show')" onmouseout="Show_Hide_Details(3, 'hide')" />

            <div class="full_name">
                Каракурсаков Нариман Эскендерович
            </div>
            <div class="description">
                Врач-хирург, сосудистый хирург, кандидат медицинских наук, стаж-15.
            </div>
        </div>

        <div class="child not_first">
            <img src="~/images/Content/Doctors/Radiation_Diagnostics/Гладилин_Игорь_Владимирович.png" class="doctor_photo" onmouseover="Show_Hide_Details(7, 'show')" onmouseover="Show_Hide_Details(6, 'show')" onmouseout="Show_Hide_Details(7, 'hide')" />

            <div class="full_name">
                Гладилин Игорь Владимирович
            </div>
            <div class="description">
                Врач-рентгенолог высшей категории, Сертификаты по смежным специальностям: компьютерная томография, ультразвуковая диагностика.Стаж работы: 21 год.
            </div>
        </div>

        <div class="child not_first">
            <img src="~/images/Content/Doctors/Surgery/Пучкина_Галина_Анатольевна.JPG" class="doctor_photo" onmouseover="Show_Hide_Details(4, 'show')" onmouseout="Show_Hide_Details(4, 'hide')" />

            <div class="full_name">
                Пучкина Галина Анатольевна
            </div>
            <div class="description">
                Врач-гинеколог, стаж-5.
            </div>
        </div>

    </div>


    <div class="row justify-content-md-center small_slider_div">
        <div class="col-md-6" style="padding-bottom: 65px; flex: 0 0 100%;">
            <div style="margin-top: 1px; max-height: 700px;" align="center">

            </div>
        </div>
    </div>

    <div class="row justify-content-md-center small_main_text">
        <div class="col-md-6" style="flex: 0 0 100%;">

        </div>
    </div>

    <div class="row justify-content-md-center big_text_div">
        <div class="col-md-6" style="vertical-align: middle;
        width: calc(661px + (100vw - 1440px) * 0.22916666666);
        flex: 0 0 42.362637362%;
        max-width: 771px;">

        </div>
        <div class="col-md-6 big_slider_div" style="padding-bottom: 65px;  flex: 0 0 57.637362637%;">
        </div>
    </div>
</div>

<script>
    window.cur_index = 5;                       // Почему 5?
    window.scroller_ready = 1;                  // Скроллер готов к запросам пользователя.

    function Shift_Left_Scroller() {            // Сдвиг скроллера на одну позицию влево
        if (window.scroller_ready == 1) {       // Если флаг готовности скроллера true, т.е. на самом деле 1
            var leftPos = $('#list_of_doctors').scrollLeft();       // Получаем координату левого конца скроллера
            $("#list_of_doctors").animate({ scrollLeft: leftPos - 350 - 12.5 }, 800);      // Анимация скроллинга длительностью 0.8 секунды
            window.scroller_ready = 0;          // Скроллер занят - не готов к другим движениям, потенциально запрашиваемых пользователями.
            setTimeout("window.scroller_ready = 1;", 900);      // Через 0.9 секунды скроллер освободится и будет готов к новым запросам от пользователя.

            if (leftPos >= 125) {               // Если позиция левого конца скроллера >= 125px, то ...
                window.cur_index = Math.max(1, window.cur_index - 1);           // текущий индекс скроллера вычисляется как максимум (1, текущий индекс-(минус)1)
            }

            Show_Scroller_Index();      // Отображаем текущий индекс скроллера в блоке навигации.
        }
    }

    function Shift_Right_Scroller() {     // Сдвиг скроллера на одну позицию вправо
        if (window.scroller_ready == 1) {       // Если флаг готовности скроллера true, т.е. на самом деле 1
            var leftPos = $('#list_of_doctors').scrollLeft();               // Получаем координату левого конца скроллера
            $("#list_of_doctors").animate({ scrollLeft: leftPos + 350 + 12.5 }, 800);            // Анимация скроллинга длительностью 0.8 секунды
            window.scroller_ready = 0;              // Скроллер занят - не готов к другим движениям, потенциально запрашиваемых пользователями.
            setTimeout("window.scroller_ready = 1;", 900);          // Через 0.9 секунды скроллер освободится и будет готов к новым запросам от пользователя.

            window.cur_index = Math.min(window.number_of_doctors, window.cur_index + 1);        //  // текущий индекс скроллера вычисляется как минимум (кол-во_объектов_в_div-блоке, текущий_индекс+1)

            Show_Scroller_Index();      // Отображаем текущий индекс скроллера в блоке навигации.
        }
    }

    function Refresh_Index_Of_Scroller() {          // Процедура обновления индекса скроллера (скроллер - это видимая часть div-блока, следовательно скроллер имеет координаты левого и правого края)
        var leftPos = $('#list_of_doctors').scrollLeft();       // Получаем координату левого края
        var width = $('#list_of_doctors').offsetWidth;          // Получаем ширину скроллера
        var rightPos = leftPos + width;                         // Вычисляем координату правого конца как (координата левого конца + ширина скроллера)

        var margin = (19 + (document.documentElement.clientWidth - 1440) * 6 / 480);    // Отступ (действительно, margin) между объектами (врачами) внутри div-блока.

        var index = 0;              // Индекс скроллера


        // Вычисляем текущий инлекс скроллера по координатам
        for (var i = 1; i <= window.number_of_doctors; i++) {       // Проходим по циклу по количеству объектов (врачей) в div-блоке
            if (rightPos - 350 - margin > 0) {                      // Если координата правого конца скроллера -(минус) ширина одного элемента (одного врача) в div-блоке -(минус) отступ < 0, то ... 
                rightPos = rightPos - (350 + margin);               // Вычитаем из правой координаты (т.е. из резерва) 
                index++;                                            // Инкремент индекса
            }
            else break;                                             // Иначе резерв закончен - выходим из цикла (индекс (позиция) вычислен).
        }

        window.cur_index = index;           // Текущий индекс скроллера - теперь глобальная переменная

        Show_Scroller_Index();      // Отображаем текущий индекс скроллера в блоке навигации.
    }

    // Отображаем текущий индекс скроллера в блоке навигации.
    function Show_Scroller_Index() {
        var index_div = document.getElementById("index_navigation_doctors");                // Находим объект (блок навигации) по id
        index_div.innerHTML = window.cur_index + " / " + window.number_of_doctors;          // Обновляем содержимое обекта (div-блока).
    }
    /* ------------------------------------------------------------ */

    window.onload = function () {
        window.number_of_doctors = (document.getElementsByClassName("child")).length;   // количество врачей на странице
        setInterval(Refresh_Index_Of_Scroller(), 100); // через каждые 0.1 секунды обновляется индекс (указатель положения) скроллера
    };
</script>